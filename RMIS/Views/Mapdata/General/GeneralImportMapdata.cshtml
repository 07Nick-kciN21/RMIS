@model RMIS.Models.Account.Mapdatas.ImportMapdataView;

@{
    Layout = null;
}


<!DOCTYPE html>
<html>

<style>
    .loadingSpinner {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(255,255,255,0.7);
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>

<head>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/lib/leaflet/leaflet.css" />
    <link rel="stylesheet" href="~/css/mapdata/importmapdata.css" />
    <link rel="stylesheet" href="~/css/mapdata/photo-container.css" />
    <script src="~/lib/jquery/dist/jquery.js"></script>    
    <script src="~/lib/togeojson/togeojson.js"></script>
    <script src="~/lib/leaflet/leaflet.js"></script>
    <script src="~/lib/xlsx/xlsx.full.min.js"></script>
    <script src="~/lib/leaflet-polylinedecorator/leaflet-polylinedecorator.js"></script>
    @* <script src="~/js/account/mapdata/general/importMapdata.js"></script> *@
    <!-- 模組化的 JavaScript 文件 -->
    <script type="module" src="~/js/account/mapdata/general/importMapdata.js"></script>
</head>

<body class="p-3">
    <div class="modal-header">
        <h5 class="modal-title">匯入圖資</h5>
    </div>
    <div class="modal-content">
        <div class="container mt-4">
            <form>
                <div class="mb-4">
                    <div>
                        <input type="hidden" class="form-control" asp-for="LayerId" readonly>
                        <input type="hidden" class="form-control" asp-for="LayerSvg" readonly>
                        <input type="hidden" class="form-control" asp-for="LayerColor" readonly>
                    </div>
                    <div>
                        <label>圖層名稱</label>
                        <input type="text" class="form-control" asp-for="LayerName" readonly>
                    </div>
                    <div>
                        <label>圖層類型</label>
                        <input type="text" class="form-control" asp-for="LayerKind" readonly>
                    </div>
                    <div class="form-group">
                        <label>上傳格式</label>
                        <select id="formatSelect" class="form-select">
                            <option value="xlsx" selected>Excel(xlsx)</option>
                            <option value="kml">KML、XML</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>上傳檔案</label>
                        <input asp-for="Xlsx_or_Kml" type="file" class="form-control" />
                    </div>
                    @* 額外內容() *@
                    <div>
                        <!-- 進階選項切換 -->
                        <button type="button" id="advancedToggle" class="advanced-toggle" onclick="toggleAdvanced()" style="display:none;">
                            <span>進階選項</span>
                            <span class="toggle-icon">▼</span>
                        </button>
                        
                        <div class="advanced-options" id="advancedOptions">
                            <div id="advancedContainer">
                                <!-- 這裡會動態載入不同的功能模組 -->
                            </div>
                        </div>
                    </div>
                </div>
                <div id="showContainer" class="mb-4">
                    <div id="map" style="height: 400px;">
                    </div>
                    <div id="result">
                    </div>
                </div>
            </form>
            <button id="submit" class="btn btn-primary">儲存</button>
            <button id="goback" class="btn btn-secondary">返回</button>
        </div>
    </div>
    <div class="loadingSpinner" style="display: none;">
        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
            <span class="visually-hidden">載入中...</span>
        </div>
    </div>
</body>
</html>