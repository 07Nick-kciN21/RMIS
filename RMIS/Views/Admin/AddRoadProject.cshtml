@model RMIS.Models.Admin.AddRoadProjectInput;

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "新增道路專案";
    Layout = null; // 禁用 _Layout.cshtml 加载
}

<form asp-action="SaveRoadProject" method="post" style="max-height: 70vh; overflow-y: auto;">
    <div>
        <label>行政區:</label>
        <input asp-for="AdminDistrict" class="form-control" />
    </div>
    <div>
        <label>起點:</label>
        <input asp-for="StartPoint" class="form-control" />
    </div>
    <div>
        <label>終點:</label>
        <input asp-for="EndPoint" class="form-control" />
    </div>
    <div>
        <label>道路長度:</label>
        <input asp-for="RoadLength" type="text" class="form-control" />
    </div>
    <div>
        <label>現況路寬:</label>
        <input asp-for="CurrentRoadWidth" type="text" class="form-control" />
    </div>
    <div>
        <label>現況類別:</label>
        <input asp-for="CurrentRoadType" class="form-control" />
    </div>
    <div>
        <label>計畫路寬:</label>
        <input asp-for="PlannedRoadWidth" type="text" class="form-control" />
    </div>
    <div>
        <label>計畫類別:</label>
        <input asp-for="PlannedRoadType" class="form-control" />
    </div>
    <div>
        <label>經費資料:</label>
        <input asp-for="ProjectBudget" type="text" class="form-control" />
    </div>
    <div>
        <label>用地經費:</label>
        <input asp-for="LandBudget" type="text" class="form-control" />
    </div>
    <div>
        <label>補償經費:</label>
        <input asp-for="CompensationBudget" type="text" class="form-control" />
    </div>
    <div>
        <label>合計經費範圍:</label>
        <input asp-for="TotalBudgetRange" type="text" class="form-control" />
    </div>

    <div id="expansion-range-container">
        <div style="display:flex">
            <h4>欲拓範圍</h4>
            <button type="button" id="add-expansion-range-btn" title="新增欲拓範圍">+</button>
        </div>
        <div class="expansion-range">
            <input type="text" name="ExpansionRange[0].Latitude" step="0.000001" placeholder="緯度" class="form-control" />
            <input type="text" name="ExpansionRange[0].Longitude" step="0.000001" placeholder="經度" class="form-control" />
        </div>
    </div>
    

    <div id="street-view-photo-container">
        <div style="display:flex">
            <h4>街景照片</h4>
            <button type="button" id="add-street-view-photo-btn" title="新增街景照片">+</button>
        </div>
        <div class="street-view-photo">
            <input type="file" name="StreetViewPhoto[0].StreetView" placeholder="圖檔名稱" class="form-control" />
            <input type="text" name="StreetViewPhoto[0].Latitude" step="0.000001" placeholder="緯度" class="form-control" />
            <input type="text" name="StreetViewPhoto[0].Longitude" step="0.000001" placeholder="經度" class="form-control" />
        </div>
    </div>
    

    <button type="submit" class="btn btn-primary">提交</button>
</form>

<script>
    let expansionRangeIndex = 1;
    let streetViewPhotoIndex = 1;

    document.getElementById('add-expansion-range-btn').addEventListener('click', function () {
        const container = document.getElementById('expansion-range-container');
        const newInputGroup = document.createElement('div');
        newInputGroup.classList.add('expansion-range');
        newInputGroup.innerHTML = `
            <input type="text" name="ExpansionRange[${expansionRangeIndex}].Latitude" step="0.000001" placeholder="緯度" class="form-control" />
            <input type="text" name="ExpansionRange[${expansionRangeIndex}].Longitude" step="0.000001" placeholder="經度" class="form-control" />
        `;
        container.appendChild(newInputGroup);
        expansionRangeIndex++;
    });

    document.getElementById('add-street-view-photo-btn').addEventListener('click', function () {
        const container = document.getElementById('street-view-photo-container');
        const newInputGroup = document.createElement('div');
        newInputGroup.classList.add('street-view-photo');
        newInputGroup.innerHTML = `
            <input type="file" name="StreetViewPhoto[${streetViewPhotoIndex}].StreetView" placeholder="圖檔名稱" class="form-control" />
            <input type="text" name="StreetViewPhoto[${streetViewPhotoIndex}].Latitude" step="0.000001" placeholder="緯度" class="form-control" />
            <input type="text" name="StreetViewPhoto[${streetViewPhotoIndex}].Longitude" step="0.000001" placeholder="經度" class="form-control" />
        `;
        container.appendChild(newInputGroup);
        streetViewPhotoIndex++;
    });
</script>

