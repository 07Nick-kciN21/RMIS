// ============================================================================
// global.js - 全域初始化模板
// 負責 ArcGIS API 載入、設備檢測和全域物件初始化
// ============================================================================

var appGlobal = {};

/**
 * 檢查當前網頁是否為行動裝置
 * @returns {boolean} 是否為行動裝置
 */
function isMobileDevice() {
    return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
};

// ============================================================================
// 設備類型檢測和 CSS 類別設定
// ============================================================================
if (isMobileDevice()) {
    if($(window).width() < 576){
        appGlobal.mapDevice = "mobile";
        $('body').addClass('is-mobile');
    }else{
        appGlobal.mapDevice = "desktop";
    }
}else{
    appGlobal.mapDevice = "desktop";
}

// ============================================================================
// ArcGIS API for JavaScript 模組載入
// ============================================================================
require([],
function () {
    // ========================================================================
    // ArcGIS 模組物件容器
    // ========================================================================
    var esriArg = {};

    // 核心模組綁定


    // ========================================================================
    // WebScene 原型方法擴展
    // ========================================================================
    
    // ========================================================================
    // 全域物件設定
    // ========================================================================
    
    // 將 ArcGIS 模組容器掛載到全域物件

    // ========================================================================
    // 應用程式啟動檢查
    // ========================================================================
    
    // 檢查是否可以啟動應用程式
    // 需要同時滿足：地圖模組載入完成 AND UI 模組載入完成
    // if (appGlobal.start && appGlobal.uiOK) {
    //     appGlobal.start();
    // } else {
    //     // 標記地圖模組已載入完成
    //     appGlobal.mapOK = true;
    // }
});